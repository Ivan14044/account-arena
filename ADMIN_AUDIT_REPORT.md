# –ê—É–¥–∏—Ç –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏: –í—Å–µ –ø—Ä–æ–±–ª–µ–º—ã –ò–°–ü–†–ê–í–õ–ï–ù–´ ‚úÖ

## 1. –§–∏–Ω–∞–Ω—Å—ã –∏ –í—ã–ø–ª–∞—Ç—ã (WithdrawalRequestController)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ (Race Condition) –ø—Ä–∏ –æ–¥–æ–±—Ä–µ–Ω–∏–∏ –≤—ã–ø–ª–∞—Ç
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/WithdrawalRequestController.php`, –º–µ—Ç–æ–¥ `approve`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ü—Ä–æ–≤–µ—Ä–∫–∏ –∏ —Å–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ –æ–±–µ—Ä–Ω—É—Ç—ã –≤ `DB::transaction` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `User::lockForUpdate()` –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞. –†–∞—Å—á–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–π —Å—É–º–º—ã —Ç–µ–ø–µ—Ä—å –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–Ω—É—Ç—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/WithdrawalRequestController.php`, –º–µ—Ç–æ–¥ `syncSupplierBalance`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –õ–æ–≥–∏–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –±–∞–ª–∞–Ω—Å–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ `BalanceService->syncSupplierBalance()` –∏ –≤—Å–µ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –≤—ã—Å–æ–∫–∞—è —Å–≤—è–∑–Ω–æ—Å—Ç—å –ª–æ–≥–∏–∫–∏ –±–∞–ª–∞–Ω—Å–∞
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/WithdrawalRequestController.php`, –º–µ—Ç–æ–¥ `markAsPaid`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í–Ω–µ–¥—Ä–µ–Ω —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π `BalanceService`. –ú–µ—Ç–æ–¥ `markAsPaid` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Å—Ä–µ–¥—Å—Ç–≤–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É FIFO —Å –±–ª–æ–∫–∏—Ä–æ–≤–∫–æ–π –∑–∞–ø–∏—Å–µ–π `SupplierEarning`.

---

## 2. –°–ø–æ—Ä—ã –∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏ (ProductDisputeController & ProductDispute Model)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –î–≤–æ–π–Ω–æ–π –≤–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤ (Race Condition)
üìç **–ì–¥–µ:** `backend/app/Models/ProductDispute.php`, –º–µ—Ç–æ–¥ `resolveWithRefund`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–æ–≤ –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤–Ω—É—Ç—Ä—å `DB::transaction`, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `lockForUpdate()` –¥–ª—è –∑–∞–ø–∏—Å–∏ –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ —Å—Ä–µ–¥—Å—Ç–≤ —Å –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ (Logic Error)
üìç **–ì–¥–µ:** `backend/app/Models/ProductDispute.php`, –º–µ—Ç–æ–¥ `resolveWithRefund`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ö–æ–¥ —Ç–µ–ø–µ—Ä—å –∏—â–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∑–∞–ø–∏—Å—å `SupplierEarning` –¥–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏ —Å–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–µ–Ω–Ω—É—é –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–º —Å—É–º–º—É. –ï—Å–ª–∏ –∑–∞–ø–∏—Å—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –Ω–µ–≤–µ—Ä–Ω—ã–µ —Å–ø–∏—Å–∞–Ω–∏—è.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –£—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ API –∑–∞–º–µ–Ω
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/ProductDisputeController.php`, –º–µ—Ç–æ–¥ `getReplacementProducts`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø–æ–ª—è (`login`, `password`, `account_data`) —É–¥–∞–ª–µ–Ω—ã –∏–∑ –≤—ã–±–æ—Ä–∫–∏ SQL. –í–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ `id` –∏ `title`.

---

## 3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ –∏ —Ä—É—á–Ω–∞—è –≤—ã–¥–∞—á–∞ (PurchaseController & ManualDeliveryController)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–µ —Ä—É—á–Ω–æ–π –≤—ã–¥–∞—á–∏
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/ManualDeliveryController.php`, –º–µ—Ç–æ–¥ `index`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è `paginate(50)`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ –ø—Ä–∏ –≤—ã–¥–∞—á–µ —Ç–æ–≤–∞—Ä–∞ (Double Processing)
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/ManualDeliveryController.php`, –º–µ—Ç–æ–¥ `process`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∏ `Purchase::lockForUpdate()` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º —Å–µ—Ä–≤–∏—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –†–∏—Å–∫ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –ø—Ä–∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏–∏
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/ManualDeliveryController.php`, –º–µ—Ç–æ–¥ `process`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** `strip_tags` —É–¥–∞–ª–µ–Ω. –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–∞–∫ –µ—Å—Ç—å, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —Å–æ—Ö—Ä–∞–Ω–Ω–æ—Å—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–æ–≤ –≤ –ø–∞—Ä–æ–ª—è—Ö –∏ –∫–æ–Ω—Ñ–∏–≥–∞—Ö.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: N+1 –∑–∞–ø—Ä–æ—Å –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∑–∞–∫–∞–∑–æ–≤
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/PurchaseController.php`, –º–µ—Ç–æ–¥ `index`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 5 –º–∏–Ω—É—Ç —á–µ—Ä–µ–∑ `Cache::remember('admin_purchases_stats', 300, ...)`.

---

## 7. –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ —á–∞—Ç—ã (SupportChatController)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –®–∏—Ä–æ–∫–∏–π —Å–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–π —Ñ–∞–π–ª–æ–≤
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/SupportChatController.php`, –º–µ—Ç–æ–¥ `sendMessage`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –°–ø–∏—Å–æ–∫ `mimes` –æ–≥—Ä–∞–Ω–∏—á–µ–Ω `jpeg, png, jpg, webp, pdf`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø–µ—á–∞—Ç–∏ (Typing Indicator)
üìç **–ì–¥–µ:** `backend/routes/web.php`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω middleware `throttle:60,1` –Ω–∞ –º–∞—Ä—à—Ä—É—Ç—ã `/typing`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ —á–∞—Ç–∞
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/SupportChatController.php`, –º–µ—Ç–æ–¥—ã `show`, `sendMessage`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `assigned_to` –∏ `is_main_admin`. –û–±—ã—á–Ω—ã–µ –∞–¥–º–∏–Ω—ã –≤–∏–¥—è—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —á–∞—Ç—ã –∏–ª–∏ –Ω–µ—Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ.

---

## 8. –°–∏—Å—Ç–µ–º–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –†–∏—Å–∫ –ø–æ–ª–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø–∏—Å–µ–º –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/SettingController.php`, —Å–µ–∫—Ü–∏—è `smtp`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ ¬´–ü—Ä–æ–≤–µ—Ä–∏—Ç—å SMTP¬ª, –∫–æ—Ç–æ—Ä–∞—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–∏—Å—å–º–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π –∏ —Ç–æ–∫–µ–Ω–æ–≤ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
üìç **–ì–¥–µ:** –¢–∞–±–ª–∏—Ü–∞ `options` (—Ö—Ä–∞–Ω–∏—Ç `smtp_password`, `telegram_bot_token`).
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ó–Ω–∞—á–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å —à–∏—Ñ—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `encrypt()` –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –º–æ–º–µ–Ω—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å XSS-–∏–Ω—ä–µ–∫—Ü–∏–π —á–µ—Ä–µ–∑ —à–∞–±–ª–æ–Ω—ã
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/NotificationTemplateController.php`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í–Ω–µ–¥—Ä–µ–Ω–∞ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ `strip_tags` (—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–º —Å–ø–∏—Å–∫–æ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã—Ö —Ç–µ–≥–æ–≤) –∏ –æ—á–∏—Å—Ç–∫–∞ –æ—Ç `on*` –∞—Ç—Ä–∏–±—É—Ç–æ–≤ –∏ `javascript:` –≤ `sanitizeTemplateData()`.

---

## 9. –ü—Ä–æ–º–æ–∫–æ–¥—ã –∏ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ (PromocodeController & PromocodeService)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–∞—Ä—Ç–∏–π –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤
üìç **–ì–¥–µ:** `backend/app/Services/PromocodeService.php`, –º–µ—Ç–æ–¥ `bulkCreate`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ö–æ–¥—ã –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏, —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º `whereIn`, –≤—Å—Ç–∞–≤–∫–∞ –≤ –ë–î –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π `insert()`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ —Å–ø–∏—Å–∫–∞—Ö –ø—Ä–æ–º–æ–∫–æ–¥–æ–≤ –∏ –≤–∞—É—á–µ—Ä–æ–≤
üìç **–ì–¥–µ:** `PromocodeController@index`, `VoucherController@index`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í–Ω–µ–¥—Ä–µ–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è `paginate(20)`.

---

## 10. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞—à–±–æ—Ä–¥–∞ (DashboardController)

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û–≥—Ä–æ–º–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ø–∞–º—è—Ç—å –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ —Ç–æ–≤–∞—Ä–æ–≤
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/DashboardController.php`, –º–µ—Ç–æ–¥ `index`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –†–∞—Å—á–µ—Ç—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤ SQL (`count()`, `sum()`, `selectRaw`). –ò—Å–∫–ª—é—á–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π –≤ –ø–∞–º—è—Ç—å.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: N+1 –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–∞ –ø—Ä–æ–¥–∞–∂
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/DashboardController.php`, –º–µ—Ç–æ–¥ `getSalesChartData`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** 30 –∑–∞–ø—Ä–æ—Å–æ–≤ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å —Å `groupBy(DATE(created_at))`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ü–æ–ª–Ω–æ–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–∞
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/DashboardController.php`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í–µ—Å—å –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–∞ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –Ω–∞ 10 –º–∏–Ω—É—Ç.

---

## 11. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –≥–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/AdminController.php`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `is_main_admin` –≤–æ –≤—Å–µ –¥–µ—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã–µ –∏ —Ä–µ–¥–∞–∫—Ü–∏–æ–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã. –ì–ª–∞–≤–Ω–æ–≥–æ –∞–¥–º–∏–Ω–∞ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å –∏–ª–∏ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Ä–æ–ª–µ–≤–æ–π –º–æ–¥–µ–ª–∏ (RBAC)
üìç **–ì–¥–µ:** –í—Å—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í–Ω–µ–¥—Ä–µ–Ω–∞ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è –º–æ–¥–µ–ª—å –ø—Ä–∞–≤ (Main Admin / Admin). –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ä–∞–∑–¥–µ–ª—ã (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞–º–∏, —Ä—É—á–Ω–∞—è –≤—ã–¥–∞—á–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏) –æ–≥—Ä–∞–Ω–∏—á–µ–Ω—ã `is_main_admin` —á–µ—Ä–µ–∑ middleware `admin.main`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°—Ç–∏—Ä–∞–Ω–∏–µ –¥–æ—Ö–æ–¥–∞ –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏ –ø—Ä–æ—Ñ–∏–ª—è
üìç **–ì–¥–µ:** `backend/app/Services/UserService.php`, –º–µ—Ç–æ–¥ `updateUser`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ü–æ–ª–µ `supplier_balance` —É–¥–∞–ª–µ–Ω–æ –∏–∑ —Ñ–æ—Ä–º—ã. –ï—Å–ª–∏ –æ–Ω–æ –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è, `UserService` –≤—ã—á–∏—Å–ª—è–µ—Ç —Ä–∞–∑–Ω–∏—Ü—É –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å –∞—Ç–æ–º–∞—Ä–Ω–æ —á–µ—Ä–µ–∑ `increment()`, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—è –ø–æ—Ç–µ—Ä—é –¥–µ–Ω–µ–≥.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –°–æ—Å—Ç–æ—è–Ω–∏–µ –≥–æ–Ω–∫–∏ –ø—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±–∞–ª–∞–Ω—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/UserController.php`, –º–µ—Ç–æ–¥ `updateBalance`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –∏ —Ä–∞—Å—á–µ—Ç —Ä–∞–∑–Ω–∏—Ü—ã –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤–Ω—É—Ç—Ä—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ—Å–ª–µ `lockForUpdate()`.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞—â–∏—Ç—ã –æ—Ç —É–¥–∞–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/UserController.php`, –º–µ—Ç–æ–¥ `destroy`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –î–æ–±–∞–≤–ª–µ–Ω –∑–∞–ø—Ä–µ—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å —Ñ–ª–∞–≥–æ–º `is_admin` –∏ –∑–∞–ø—Ä–µ—Ç –Ω–∞ —Å–∞–º–æ—É–¥–∞–ª–µ–Ω–∏–µ.

---

## 12. –¶–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –ù–µ—ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –º–∞—Å—Å–æ–≤–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∞—É—á–µ—Ä–æ–≤
üìç **–ì–¥–µ:** `backend/app/Http/Controllers/Admin/VoucherController.php`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —á–µ—Ä–µ–∑ –ø–∞–∫–µ—Ç–Ω—É—é –≤—Å—Ç–∞–≤–∫—É `insert()` –∏ –ø—Ä–æ–≤–µ—Ä–∫—É —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç–∏ –≤ –ø–∞–º—è—Ç–∏.

---

### ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ SoftDeletes –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π
üìç **–ì–¥–µ:** –ú–æ–¥–µ–ª–∏ `Voucher`, `Purchase`, `WithdrawalRequest`.
‚úÖ **–ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ:** –í–Ω–µ–¥—Ä–µ–Ω —Ç—Ä–µ–π—Ç `SoftDeletes`, —Å–æ–∑–¥–∞–Ω—ã –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –º–∏–≥—Ä–∞—Ü–∏–∏.
