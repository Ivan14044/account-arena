Ğ¡ĞšĞĞŸĞ˜Ğ Ğ£Ğ™ Ğ­Ğ¢Ğ Ğ˜ Ğ’Ğ¡Ğ¢ĞĞ’Ğ¬ Ğ’ PUTTY (Ğ’Ğ¡Ğ Ğ¡Ğ ĞĞ—Ğ£):
============================================

bash << 'ENDOFSCRIPT'
set -e
clear
echo "ğŸš€ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ½Ğ°Ñ‡Ğ°Ñ‚Ğ°..."

# 1. ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ
echo "[1/7] ĞĞ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹..."
export DEBIAN_FRONTEND=noninteractive
apt update -y > /dev/null 2>&1
apt upgrade -y > /dev/null 2>&1
apt install -y software-properties-common curl wget unzip git ufw zip nano > /dev/null 2>&1
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

# 2. Nginx
echo "[2/7] Nginx..."
apt install -y nginx > /dev/null 2>&1
systemctl start nginx
systemctl enable nginx > /dev/null 2>&1
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

# 3. PHP 8.2
echo "[3/7] PHP 8.2..."
add-apt-repository ppa:ondrej/php -y > /dev/null 2>&1
apt update -y > /dev/null 2>&1
apt install -y php8.2-fpm php8.2-mysql php8.2-xml php8.2-mbstring php8.2-curl php8.2-zip php8.2-gd php8.2-redis php8.2-bcmath php8.2-intl php8.2-cli > /dev/null 2>&1
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

# 4. MySQL
echo "[4/7] MySQL..."
apt install -y mysql-server > /dev/null 2>&1
systemctl start mysql
systemctl enable mysql > /dev/null 2>&1
MYSQL_PASS=$(openssl rand -base64 32)
mysql -e "ALTER USER 'root'@'localhost' IDENTIFIED WITH mysql_native_password BY '${MYSQL_PASS}';" 2>/dev/null
echo "${MYSQL_PASS}" > /root/.mysql_pass
DB_PASS=$(openssl rand -base64 32)
mysql -uroot -p"${MYSQL_PASS}" -e "CREATE DATABASE IF NOT EXISTS subcloudy CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci; CREATE USER IF NOT EXISTS 'subcloudy'@'localhost' IDENTIFIED BY '${DB_PASS}'; GRANT ALL PRIVILEGES ON subcloudy.* TO 'subcloudy'@'localhost'; FLUSH PRIVILEGES;" 2>/dev/null
echo -e "DB_HOST=localhost\nDB_PORT=3306\nDB_DATABASE=subcloudy\nDB_USERNAME=subcloudy\nDB_PASSWORD=${DB_PASS}" > /root/.db_creds
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

# 5. Redis, Composer, Node
echo "[5/7] Redis, Composer, Node.js..."
apt install -y redis-server > /dev/null 2>&1
systemctl start redis-server
curl -sS https://getcomposer.org/installer | php > /dev/null 2>&1
mv composer.phar /usr/local/bin/composer 2>/dev/null
curl -fsSL https://deb.nodesource.com/setup_20.x | bash - > /dev/null 2>&1
apt install -y nodejs > /dev/null 2>&1
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

# 6. Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¸ Ñ„Ğ°Ğ¹Ğ»Ñ‹
echo "[6/7] Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°..."
mkdir -p /var/www/subcloudy/{backend/public,frontend/dist}
cat > /var/www/subcloudy/backend/public/index.php << 'EOF'
<?php
header('Content-Type: application/json');
header('Access-Control-Allow-Origin: *');
echo json_encode(['status'=>'success','message'=>'Account Arena API Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚!','version'=>'1.0.0','timestamp'=>date('Y-m-d H:i:s'),'php'=>phpversion()],JSON_PRETTY_PRINT);
EOF

cat > /var/www/subcloudy/frontend/dist/index.html << 'EOF'
<!DOCTYPE html>
<html lang="ru">
<head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0"><title>Account Arena</title>
<style>*{margin:0;padding:0;box-sizing:border-box}body{font-family:system-ui,-apple-system,sans-serif;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);min-height:100vh;display:flex;align-items:center;justify-content:center;color:#fff}.container{text-align:center;padding:60px 40px;background:rgba(255,255,255,0.1);backdrop-filter:blur(10px);border-radius:20px;max-width:800px}h1{font-size:3em;margin-bottom:20px}.logo{font-size:5em;margin-bottom:20px}.status{display:inline-block;padding:15px 30px;background:rgba(0,255,0,0.3);border-radius:50px;margin:20px 0;font-weight:bold}p{font-size:1.2em;margin:15px 0}.button{display:inline-block;margin-top:20px;padding:15px 40px;background:#fff;color:#667eea;text-decoration:none;border-radius:50px;font-weight:bold;cursor:pointer;border:none;font-size:1.1em}#result{margin-top:20px;padding:20px;background:rgba(0,0,0,0.3);border-radius:10px;font-family:monospace;font-size:0.9em;text-align:left;overflow-x:auto}</style>
</head>
<body>
<div class="container">
<div class="logo">ğŸ®</div>
<h1>Account Arena</h1>
<p class="status">âœ… Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ğ·Ğ°Ğ¿ÑƒÑ‰ĞµĞ½!</p>
<p>Ğ”Ğ¾Ğ±Ñ€Ğ¾ Ğ¿Ğ¾Ğ¶Ğ°Ğ»Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñƒ Ñ†Ğ¸Ñ„Ñ€Ğ¾Ğ²Ñ‹Ñ… Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²</p>
<p>ğŸš€ Ğ¡ĞµÑ€Ğ²ĞµÑ€ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ½Ğ° <strong>https://account-arena.com</strong></p>
<button class="button" onclick="testAPI()">ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ API</button>
<div id="result" style="display:none"></div>
</div>
<script>
async function testAPI(){
const r=document.getElementById('result');
r.style.display='block';
r.innerHTML='â³ ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ°...';
try{
const res=await fetch('/api/');
const data=await res.json();
r.innerHTML='<div style="color:#4ade80">âœ… API Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚!</div><pre>'+JSON.stringify(data,null,2)+'</pre>';
}catch(e){
r.innerHTML='<div style="color:#fca5a5">âŒ ĞÑˆĞ¸Ğ±ĞºĞ°: '+e.message+'</div>';
}
}
setTimeout(testAPI,1000);
</script>
</body>
</html>
EOF
chown -R www-data:www-data /var/www/subcloudy
chmod -R 755 /var/www/subcloudy
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

# 7. Nginx ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ SSL
echo "[7/7] ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Nginx Ğ¸ SSL..."
cat > /etc/nginx/sites-available/account-arena.com << 'EOF'
server {
    listen 80;
    server_name account-arena.com www.account-arena.com;
    root /var/www/subcloudy/frontend/dist;
    index index.html;
    location / { try_files $uri $uri/ /index.html; }
    location /api {
        alias /var/www/subcloudy/backend/public;
        try_files $uri $uri/ @backend;
        location ~ \.php$ {
            include fastcgi_params;
            fastcgi_pass unix:/var/run/php/php8.2-fpm.sock;
            fastcgi_param SCRIPT_FILENAME /var/www/subcloudy/backend/public/index.php;
        }
    }
    location @backend { rewrite /api/(.*)$ /api/index.php?/$1 last; }
}
EOF
ln -sf /etc/nginx/sites-available/account-arena.com /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t > /dev/null 2>&1
systemctl reload nginx
apt install -y certbot python3-certbot-nginx > /dev/null 2>&1
certbot --nginx -d account-arena.com -d www.account-arena.com --non-interactive --agree-tos --email admin@account-arena.com --redirect > /dev/null 2>&1 || echo "SSL: ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸ Ğ¿Ğ¾Ğ·Ğ¶Ğµ"
ufw allow 22/tcp > /dev/null 2>&1
ufw allow 80/tcp > /dev/null 2>&1
ufw allow 443/tcp > /dev/null 2>&1
ufw --force enable > /dev/null 2>&1
echo "âœ… Ğ“Ğ¾Ñ‚Ğ¾Ğ²Ğ¾"

clear
echo ""
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘          ğŸ‰ Ğ£Ğ¡Ğ¢ĞĞĞĞ’ĞšĞ Ğ—ĞĞ’Ğ•Ğ Ğ¨Ğ•ĞĞ! ğŸ‰                         â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""
echo "ğŸŒ ĞĞ¢ĞšĞ ĞĞ™: https://account-arena.com"
echo ""
echo "ğŸ” ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ñ‹:"
echo "   MySQL root: cat /root/.mysql_pass"
echo "   Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…: cat /root/.db_creds"
echo ""

ENDOFSCRIPT

============================================

