# ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û: –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –≤–æ–π—Ç–∏ –≤ –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

---

## üîç –ü–†–ò–ß–ò–ù–ê –ë–ê–ì–ê

### –¶–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π:
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ **–ø–æ—Å—Ç–∞–≤—â–∏–∫** (–Ω–µ –∞–¥–º–∏–Ω)
2. –ü–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∞ `/login` –∏–ª–∏ `/`
3. `guest` middleware –≤–∏–¥–∏—Ç –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/`
4. `admin.auth` middleware –≤–∏–¥–∏—Ç –Ω–µ-–∞–¥–º–∏–Ω–∞ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/login`
5. **–¶–ò–ö–õ:** `/login` ‚Üí `/` ‚Üí `/login` ‚Üí `/` ‚Üí ...

---

## ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø

### 1. –£–±—Ä–∞–Ω `guest` middleware —Å –º–∞—Ä—à—Ä—É—Ç–æ–≤ login
**–§–∞–π–ª:** `backend/routes/web.php`

**–ë–´–õ–û:**
```php
Route::middleware('guest')->group(function () {
    Route::get('/login', [LoginController::class, 'showLoginForm'])->name('login');
    Route::post('/login', [LoginController::class, 'login']);
});
```

**–°–¢–ê–õ–û:**
```php
// Login routes (no guest middleware to avoid redirect loops)
Route::get('/login', [LoginController::class, 'showLoginForm'])->name('login');
Route::post('/login', [LoginController::class, 'login']);
```

---

### 2. –£–±—Ä–∞–Ω `guest` middleware –∏–∑ LoginController
**–§–∞–π–ª:** `backend/app/Http/Controllers/Auth/LoginController.php`

**–ë–´–õ–û:**
```php
public function __construct()
{
    $this->middleware('guest')->except('logout');
    $this->middleware('auth')->only('logout');
}
```

**–°–¢–ê–õ–û:**
```php
public function __construct()
{
    // –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º guest middleware, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –±—É–¥–µ—Ç –≤ showLoginForm()
    $this->middleware('auth')->only('logout');
}
```

---

### 3. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ showLoginForm()
**–§–∞–π–ª:** `backend/app/Http/Controllers/Auth/LoginController.php`

**–î–û–ë–ê–í–õ–ï–ù–û:**
```php
public function showLoginForm()
{
    // –ï—Å–ª–∏ —É–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –∞–¥–º–∏–Ω - —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ dashboard
    if (auth()->check() && auth()->user()->is_admin) {
        return redirect()->route('admin.dashboard');
    }

    // –ï—Å–ª–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –∫–∞–∫ –Ω–µ-–∞–¥–º–∏–Ω - —Ä–∞–∑–ª–æ–≥–∏–Ω–∏—Ç—å –∏ –ø–æ–∫–∞–∑–∞—Ç—å —Ñ–æ—Ä–º—É
    if (auth()->check() && !auth()->user()->is_admin) {
        auth()->logout();
    }

    return view('auth.login');
}
```

---

### 4. –£–ª—É—á—à–µ–Ω AdminAuth middleware
**–§–∞–π–ª:** `backend/app/Http/Middleware/AdminAuth.php`

**–î–û–ë–ê–í–õ–ï–ù–û:**
```php
// –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –∞–¥–º–∏–Ω - —Ä–∞–∑–ª–æ–≥–∏–Ω–∏—Ç—å –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ –≤—Ö–æ–¥
if (auth()->check()) {
    auth()->logout();
}

return redirect(route('admin.login'));
```

---

## üß™ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –í—Ö–æ–¥ –∫–∞–∫ –∞–¥–º–∏–Ω
1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å `/login`
2. ‚úÖ –í–≤–µ—Å—Ç–∏ –ª–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∞
3. ‚úÖ –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/` (dashboard)
4. ‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å —Ä–∞–±–æ—Ç–∞–µ—Ç

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ü–æ–ø—ã—Ç–∫–∞ –∑–∞–π—Ç–∏ –ø–æ–¥ –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–º
1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å `/login` –±—É–¥—É—á–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∫–∞–∫ –ø–æ—Å—Ç–∞–≤—â–∏–∫
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout –ø–æ—Å—Ç–∞–≤—â–∏–∫–∞
3. ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞
4. ‚úÖ –ú–æ–∂–Ω–æ –≤–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –£–∂–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∞–¥–º–∏–Ω
1. ‚úÖ –û—Ç–∫—Ä—ã—Ç—å `/login` –±—É–¥—É—á–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–º –∫–∞–∫ –∞–¥–º–∏–Ω
2. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/` (dashboard)
3. ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤

---

## üîß –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –ö–û–ú–ê–ù–î–´

```bash
php artisan route:clear   ‚úÖ
php artisan config:clear  ‚úÖ
php artisan view:clear    ‚úÖ
```

---

## ‚úÖ –ò–¢–û–ì

**–¶–∏–∫–ª–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ò–°–ü–†–ê–í–õ–ï–ù–û!**

–¢–µ–ø–µ—Ä—å:
- ‚úÖ –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö —Ä–µ–¥–∏—Ä–µ–∫—Ç–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π logout –¥–ª—è –Ω–µ-–∞–¥–º–∏–Ω–æ–≤

---

## üéØ –ß–¢–û –î–ï–õ–ê–¢–¨ –î–ê–õ–¨–®–ï

1. **–û—á–∏—Å—Ç–∏—Ç—å cookies –±—Ä–∞—É–∑–µ—Ä–∞** –¥–ª—è localhost:8000
2. **–û—Ç–∫—Ä—ã—Ç—å –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ:**
   ```
   http://localhost:8000/login
   ```
3. **–í–æ–π—Ç–∏ –∫–∞–∫ –∞–¥–º–∏–Ω:**
   - Email: `admin@mail.com`
   - –ü–∞—Ä–æ–ª—å: (–≤–∞—à –ø–∞—Ä–æ–ª—å)

4. **–î–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å!** ‚úÖ

---

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä –∏–ª–∏ –æ—á–∏—Å—Ç–∏—Ç–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Å–∞–π—Ç–∞.**

